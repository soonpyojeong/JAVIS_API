{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport axios from 'axios'; // axios를 import\n\nexport default {\n  data() {\n    return {\n      monitoringItems: [{\n        title: '테이블스페이스 관제',\n        events: [],\n        style: {\n          position: 'absolute',\n          top: '20px',\n          left: '300px',\n          zIndex: 1,\n          width: '550px',\n          height: '300px'\n        }\n      }, {\n        title: '생사 관제',\n        events: [],\n        style: {\n          position: 'absolute',\n          top: '20px',\n          left: '900px',\n          zIndex: 1,\n          width: '550px',\n          height: '300px'\n        }\n      }, {\n        title: '오브젝트 인밸리드 관제',\n        events: [{\n          id: 3,\n          message: 'Invalid Object 발견: FUNCTION_A'\n        }],\n        style: {\n          position: 'absolute',\n          top: '380px',\n          left: '300px',\n          zIndex: 1,\n          width: '550px',\n          height: '300px'\n        }\n      }, {\n        title: '락 리스트 관제',\n        events: [{\n          id: 4,\n          message: 'Deadlock 발생: Session 101'\n        }],\n        style: {\n          position: 'absolute',\n          top: '380px',\n          left: '900px',\n          zIndex: 1,\n          width: '550px',\n          height: '300px'\n        }\n      }],\n      dragData: {\n        isDragging: false,\n        index: null,\n        offsetX: 0,\n        offsetY: 0\n      },\n      snapPositions: [20, 380, 560] // 자석처럼 붙을 top 위치들\n    };\n  },\n  methods: {\n    fetchMonitoringData() {\n      axios.get('/api/threshold/tbsChkmon').then(response => {\n        const events = response.data.map(item => ({\n          id: item.id,\n          message: `${item.dbName} DB의 사용률 ${item.chkRate}% 초과 여유공간 ${item.freeSize}Mb 남음`\n        }));\n        this.monitoringItems[0].events = events; // 첫 번째 박스에 데이터 추가\n      }).catch(error => {\n        console.error('데이터 가져오기 실패:', error);\n      });\n    }\n  },\n  created() {\n    this.fetchMonitoringData(); // 컴포넌트 생성 시 데이터 가져오기\n  }\n};","map":{"version":3,"names":["axios","data","monitoringItems","title","events","style","position","top","left","zIndex","width","height","id","message","dragData","isDragging","index","offsetX","offsetY","snapPositions","methods","fetchMonitoringData","get","then","response","map","item","dbName","chkRate","freeSize","catch","error","console","created"],"sources":["D:\\JAVIS\\dongkukDBmon\\dongkukDBmon\\frontend\\src\\components\\MainPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"dashboard\">\r\n    <div\r\n      class=\"monitoring-box draggable\"\r\n      v-for=\"(item) in monitoringItems\"\r\n      :key=\"item.title\"\r\n      :style=\"item.style\"\r\n    >\r\n      <h2>{{ item.title }}</h2>\r\n      <div class=\"content\">\r\n        <ul>\r\n          <li v-for=\"event in item.events\" :key=\"event.id\">\r\n            {{ event.message }}\r\n          </li>\r\n        </ul>\r\n        <div v-if=\"item.events.length === 0\" class=\"no-events\">현재 이벤트가 없습니다.</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport axios from 'axios'; // axios를 import\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n         monitoringItems: [\r\n           {\r\n             title: '테이블스페이스 관제',\r\n             events: [],\r\n             style: { position: 'absolute', top: '20px', left: '300px', zIndex: 1, width: '550px', height: '300px' },\r\n           },\r\n           {\r\n             title: '생사 관제',\r\n             events: [],\r\n             style: { position: 'absolute', top: '20px', left: '900px', zIndex: 1, width: '550px', height: '300px' },\r\n           },\r\n           {\r\n             title: '오브젝트 인밸리드 관제',\r\n             events: [{ id: 3, message: 'Invalid Object 발견: FUNCTION_A' }],\r\n             style: { position: 'absolute', top: '380px', left: '300px', zIndex: 1, width: '550px', height: '300px' },\r\n           },\r\n           {\r\n             title: '락 리스트 관제',\r\n             events: [{ id: 4, message: 'Deadlock 발생: Session 101' }],\r\n             style: { position: 'absolute', top: '380px', left: '900px', zIndex: 1, width: '550px', height: '300px' },\r\n           },\r\n         ],\r\n         dragData: {\r\n           isDragging: false,\r\n           index: null,\r\n           offsetX: 0,\r\n           offsetY: 0,\r\n         },\r\n         snapPositions: [20, 380, 560], // 자석처럼 붙을 top 위치들\r\n       };\r\n     },\r\n\r\n  methods: {\r\n    fetchMonitoringData() {\r\n        axios.get('/api/threshold/tbsChkmon')\r\n          .then(response => {\r\n            const events = response.data.map(item => ({\r\n              id: item.id,\r\n              message: `${item.dbName} DB의 사용률 ${item.chkRate}% 초과 여유공간 ${item.freeSize}Mb 남음`,\r\n            }));\r\n            this.monitoringItems[0].events = events; // 첫 번째 박스에 데이터 추가\r\n          })\r\n          .catch(error => {\r\n            console.error('데이터 가져오기 실패:', error);\r\n          });\r\n      },\r\n\r\n\r\n    },\r\n    created() {\r\n           this.fetchMonitoringData(); // 컴포넌트 생성 시 데이터 가져오기\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.dashboard {\r\n  position: relative;\r\n  height: 100vh;\r\n  background: #f9f9f9;\r\n  font-family: 'Arial', sans-serif;\r\n  overflow: hidden;\r\n}\r\n\r\n.monitoring-box, .schedule-box {\r\n  background: white;\r\n  user-select: none;\r\n  border: 1px solid #ddd;\r\n  border-radius: 10px;\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n  padding: 15px;\r\n  cursor: grab;\r\n  transition: transform 0.2s ease, left 0.2s ease, top 0.2s ease;\r\n  position: absolute;\r\n  height: auto; /* 고정 높이를 제거하고 내용에 따라 크기를 동적으로 조정 */\r\n  max-height: 300px; /* 필요 시 최대 높이를 설정 */\r\n  overflow-y: auto; /* 내용이 너무 많으면 스크롤 활성화 */\r\n}\r\n\r\n.monitoring-box:active {\r\n  cursor: grabbing;\r\n}\r\n.monitoring-box {\r\n  height: auto; /* 박스 높이는 내용에 따라 자동 조정 */\r\n  max-height: 300px; /* 최대 높이를 설정 */\r\n  overflow: hidden; /* 박스 전체의 스크롤은 숨김 */\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.monitoring-box h2 {\r\n  position: relative; /* 제목은 상단 고정 */\r\n  background: white; /* 배경색 설정 */\r\n  z-index: 2; /* 내용보다 위에 보이도록 설정 */\r\n  font-size: 18px;\r\n  margin: 0;\r\n  color: #333;\r\n  border-bottom: 1px solid #ddd;\r\n  padding: 5px 0;\r\n}\r\n\r\n.monitoring-box .content {\r\n  flex: 1; /* 나머지 공간을 차지 */\r\n  overflow-y: auto; /* 스크롤은 이 컨테이너에서 발생 */\r\n  padding-top: 10px; /* 내용과 제목 간격 */\r\n}\r\n\r\n.monitoring-box ul {\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n\r\n.monitoring-box li {\r\n  padding: 5px 0;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  font-size: 14px;\r\n  color: #555;\r\n}\r\n\r\n.monitoring-box li:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.no-events {\r\n  font-size: 14px;\r\n  color: #999;\r\n  text-align: center;\r\n  padding: 10px 0;\r\n}\r\n\r\n\r\n\r\n</style>\r\n"],"mappings":";;AAuBA,OAAOA,KAAI,MAAO,OAAO,EAAE;;AAE3B,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACFC,eAAe,EAAE,CACf;QACEC,KAAK,EAAE,YAAY;QACnBC,MAAM,EAAE,EAAE;QACVC,KAAK,EAAE;UAAEC,QAAQ,EAAE,UAAU;UAAEC,GAAG,EAAE,MAAM;UAAEC,IAAI,EAAE,OAAO;UAAEC,MAAM,EAAE,CAAC;UAAEC,KAAK,EAAE,OAAO;UAAEC,MAAM,EAAE;QAAQ;MACxG,CAAC,EACD;QACER,KAAK,EAAE,OAAO;QACdC,MAAM,EAAE,EAAE;QACVC,KAAK,EAAE;UAAEC,QAAQ,EAAE,UAAU;UAAEC,GAAG,EAAE,MAAM;UAAEC,IAAI,EAAE,OAAO;UAAEC,MAAM,EAAE,CAAC;UAAEC,KAAK,EAAE,OAAO;UAAEC,MAAM,EAAE;QAAQ;MACxG,CAAC,EACD;QACER,KAAK,EAAE,cAAc;QACrBC,MAAM,EAAE,CAAC;UAAEQ,EAAE,EAAE,CAAC;UAAEC,OAAO,EAAE;QAAgC,CAAC,CAAC;QAC7DR,KAAK,EAAE;UAAEC,QAAQ,EAAE,UAAU;UAAEC,GAAG,EAAE,OAAO;UAAEC,IAAI,EAAE,OAAO;UAAEC,MAAM,EAAE,CAAC;UAAEC,KAAK,EAAE,OAAO;UAAEC,MAAM,EAAE;QAAQ;MACzG,CAAC,EACD;QACER,KAAK,EAAE,UAAU;QACjBC,MAAM,EAAE,CAAC;UAAEQ,EAAE,EAAE,CAAC;UAAEC,OAAO,EAAE;QAA2B,CAAC,CAAC;QACxDR,KAAK,EAAE;UAAEC,QAAQ,EAAE,UAAU;UAAEC,GAAG,EAAE,OAAO;UAAEC,IAAI,EAAE,OAAO;UAAEC,MAAM,EAAE,CAAC;UAAEC,KAAK,EAAE,OAAO;UAAEC,MAAM,EAAE;QAAQ;MACzG,CAAC,CACF;MACDG,QAAQ,EAAE;QACRC,UAAU,EAAE,KAAK;QACjBC,KAAK,EAAE,IAAI;QACXC,OAAO,EAAE,CAAC;QACVC,OAAO,EAAE;MACX,CAAC;MACDC,aAAa,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,GAAG,CAAC,CAAE;IACjC,CAAC;EACH,CAAC;EAEJC,OAAO,EAAE;IACPC,mBAAmBA,CAAA,EAAG;MAClBrB,KAAK,CAACsB,GAAG,CAAC,0BAA0B,EACjCC,IAAI,CAACC,QAAO,IAAK;QAChB,MAAMpB,MAAK,GAAIoB,QAAQ,CAACvB,IAAI,CAACwB,GAAG,CAACC,IAAG,KAAM;UACxCd,EAAE,EAAEc,IAAI,CAACd,EAAE;UACXC,OAAO,EAAE,GAAGa,IAAI,CAACC,MAAM,YAAYD,IAAI,CAACE,OAAO,aAAaF,IAAI,CAACG,QAAQ;QAC3E,CAAC,CAAC,CAAC;QACH,IAAI,CAAC3B,eAAe,CAAC,CAAC,CAAC,CAACE,MAAK,GAAIA,MAAM,EAAE;MAC3C,CAAC,EACA0B,KAAK,CAACC,KAAI,IAAK;QACdC,OAAO,CAACD,KAAK,CAAC,cAAc,EAAEA,KAAK,CAAC;MACtC,CAAC,CAAC;IACN;EAGF,CAAC;EACDE,OAAOA,CAAA,EAAG;IACH,IAAI,CAACZ,mBAAmB,CAAC,CAAC,EAAE;EACrC;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}